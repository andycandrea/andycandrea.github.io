---
title: Day 33
description: New PR up! Almost done with betting.
comments: true
layout: post
---
After talking with ZP and Nathanael this morning, I figured out the issue I was having yesterday when editing picks---turns out that the main reason was a uniqueness constraint that didn't quite like users creating a new option for a given bet, even if it meant that user would only have one pick per bet. I intended to start working on testing right after getting that sorted out, but I ended up getting caught up in working on the view for `Picks` in order to make them match more closely with Janice's designs.

I managed to get the PR up near the end of the day, and I think that it looks pretty good. My integration test for selecting a pick is a little weird---a bunch of nested `context` blocks that had different `before` blocks and `let` statements ended up causing some tests to have repeated `visit` statements, so I hope to get those cleaned up. I could easily move several of my `befores` and `lets` a few `context` blocks up, but that would mean that more code is executed unnecessarily for each test. Personally, I prefer taking a slightly less DRY approach over this option, so I'm curious to see any comments I get on my PR---hopefully, there will be an easy way to find some middle ground. Tomorrow, I'll work on any necessary refactoring and then move on to allowing a bet creator to set the winning answer. Since that shouldn't take terribly long, I hope to get a little time to work on Hacker News---I'd really like to have it pretty much completed by the presentation next Tuesday.
